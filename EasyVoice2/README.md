# EasyVoice ğŸ™ï¸

## é¡¹ç›®ç®€ä»‹ âœ¨  

**EasyVoice** æ˜¯ä¸€ä¸ªå¼€æºçš„æ–‡æœ¬ã€å°è¯´æ™ºèƒ½è½¬è¯­éŸ³è§£å†³æ–¹æ¡ˆï¼Œæ—¨åœ¨å¸®åŠ©ç”¨æˆ·è½»æ¾å°†æ–‡æœ¬å†…å®¹è½¬æ¢ä¸ºé«˜è´¨é‡çš„è¯­éŸ³è¾“å‡ºã€‚  

- **ä¸€é”®ç”Ÿæˆè¯­éŸ³å’Œå­—å¹•**

- **AI æ™ºèƒ½æ¨èé…éŸ³**

- **å®Œå…¨å…è´¹ï¼Œæ— æ—¶é•¿ã€æ— å­—æ•°é™åˆ¶**

- **æ”¯æŒå°† 10 ä¸‡å­—ä»¥ä¸Šçš„å°è¯´ä¸€é”®è½¬ä¸ºæœ‰å£°ä¹¦ï¼**

- **æµå¼ä¼ è¾“ï¼Œå¤šé•¿çš„æ–‡æœ¬éƒ½èƒ½ç«‹åˆ»æ’­æ”¾**

- **æ”¯æŒè‡ªå®šä¹‰å¤šè§’è‰²é…éŸ³**

æ— è®ºä½ æ˜¯æƒ³å¬å°è¯´ã€ä¸ºåˆ›ä½œé…éŸ³ï¼Œè¿˜æ˜¯æ‰“é€ ä¸ªæ€§åŒ–éŸ³é¢‘ï¼ŒEasyVoice éƒ½æ˜¯ä½ çš„æœ€ä½³åŠ©æ‰‹ï¼

**ä½ å¯ä»¥è½»æ¾çš„å°† EasyVoice éƒ¨ç½²åˆ°ä½ çš„äº‘æœåŠ¡å™¨æˆ–è€…æœ¬åœ°ï¼**

## ä½“éªŒä¸€ä¸‹

[easyvoice.ioplus.tech](https://easyvoice.ioplus.tech)

## æ ¸å¿ƒåŠŸèƒ½ ğŸŒŸ

- **æ–‡æœ¬è½¬è¯­éŸ³** ğŸ“ â¡ï¸ ğŸµ  
  ä¸€é”®å°†å¤§æ®µæ–‡æœ¬è½¬ä¸ºè¯­éŸ³ï¼Œé«˜æ•ˆåˆçœæ—¶ã€‚
- **æµå¼ä¼ è¾“** ğŸŒŠ  
  å†å¤šçš„æ–‡æœ¬ï¼Œéƒ½å¯ä»¥è¿…é€Ÿè¿”å›éŸ³é¢‘ç›´æ¥å¼€å§‹è¯•å¬ï¼
- **å¤šè¯­è¨€æ”¯æŒ** ğŸŒ  
  æ”¯æŒä¸­æ–‡ã€è‹±æ–‡ç­‰å¤šç§è¯­è¨€ã€‚  
- **å­—å¹•æ”¯æŒ** ğŸ’¬  
  è‡ªåŠ¨ç”Ÿæˆå­—å¹•æ–‡ä»¶ï¼Œæ–¹ä¾¿è§†é¢‘åˆ¶ä½œå’Œå­—å¹•ç¿»è¯‘ã€‚  
- **è§’è‰²é…éŸ³** ğŸ­  
  æä¾›å¤šç§å£°éŸ³é€‰é¡¹ï¼Œå®Œç¾é€‚é…ä¸åŒè§’è‰²ã€‚  
- **è‡ªå®šä¹‰è®¾ç½®** âš™ï¸  
  å¯è°ƒæ•´è¯­é€Ÿã€éŸ³è°ƒç­‰å‚æ•°ï¼Œæ‰“é€ ä¸“å±è¯­éŸ³é£æ ¼ã€‚  
- **AI æ¨è** ğŸ§   
  é€šè¿‡ AI æ™ºèƒ½æ¨èæœ€é€‚åˆçš„è¯­éŸ³é…ç½®ï¼Œçœå¿ƒåˆè´´å¿ƒã€‚  
- **è¯•å¬åŠŸèƒ½** ğŸ§  
  ç”Ÿæˆå‰å¯è¯•å¬æ•ˆæœï¼Œç¡®ä¿æ¯ä¸€å¥éƒ½å¦‚ä½ æ‰€æ„¿ï¼  

## ScreenshotsğŸ“¸

![Home](./images/readme.home.jpg)
![Generate](./images/readme.generate.jpg)

## å¿«é€Ÿå¼€å§‹ ğŸš€

### 1. é€šè¿‡ docker è¿è¡Œ

```bash
# æç®€è¿è¡Œï¼Œä½ å¯ä»¥é€šè¿‡ -e æŒ‡å®šç¯å¢ƒå˜é‡
docker run -d -p 3000:3000 -v $(pwd)/audio:/app/audio cosincox/easyvoice:latest
```

or å°†ä»“åº“å…‹éš†åˆ°æœ¬åœ°ï¼Œä½¿ç”¨ Docker Compose ä¸€é”®è¿è¡Œï¼

```bash
docker-compose up -d
```

### 2. æœ¬åœ°è¿è¡Œé¡¹ç›®ï¼ˆè¯·å…ˆç¡®ä¿å·²å®‰è£… Node.js ç¯å¢ƒï¼Œå‚è€ƒï¼š[å®‰è£… Node.js](https://zhuanlan.zhihu.com/p/442215189)ï¼‰

```bash
# å¼€å¯/å®‰è£… pnpm
corepack enable
# æˆ–è€…ä½¿ç”¨ npm å®‰è£… pnpm
npm install -g pnpm

# å…‹éš†ä»“åº“
git clone git@github.com:cosin2077/easyVoice.git
cd easyVoice
# å®‰è£…ä¾èµ–
pnpm i -r

# å¼€å‘æ¨¡å¼
pnpm dev:root

# ç”Ÿäº§æ¨¡å¼
pnpm build:root
pnpm start:root
```

### 3. ç”Ÿæˆçš„éŸ³é¢‘ã€å­—å¹•ä¿å­˜ä½ç½®

- Docker éƒ¨ç½²ï¼š ä¿å­˜åœ¨æŒ‚è½½çš„ `audio` ç›®å½•ä¸‹
- Node.js è¿è¡Œä¿å­˜åœ¨ `./packages/backend/audio` ç›®å½•ä¸‹

## é«˜çº§

### è§’è‰²è‡ªå®šä¹‰

å¯åŠ¨æœåŠ¡åå°è¯•åœ¨å‘½ä»¤è¡Œè¿è¡Œä¸‹è¿°å‘½ä»¤ï¼š

```bash
curl -X POST http://localhost:3000/api/v1/tts/generateJson \
  -H "Content-Type: application/json" \
  -d '{
  "data": [
    {
      "desc": "å¾å‡¤å¹´",
      "text": "ä½ æ•¢åŠ¨ä»–ï¼Œæˆ‘ä¼šç©·å°½ä¸€ç”Ÿæ¯æ‰å¢å®¶ï¼Œè¯´åˆ°åšåˆ°",
      "voice": "zh-CN-YunjianNeural",
      "volume": "40%"
    },
    {
      "desc": "å§œæ³¥",
      "text": "å¾å‡¤å¹´ï¼Œä½ å¿«èµ°ï¼Œä½ æ‰“ä¸è¿‡çš„",
      "voice": "zh-CN-XiaoyiNeural"
    },
    {
      "desc": "è·¯äººç”²",
      "text": "ä»–å¯æ˜¯å ‚å ‚æ£ æºªå‰‘ä»™ï¼Œè¿™å°å­çœŸæ˜¯é‡åˆ°å¼ºæ•Œäº†",
      "voice": "zh-CN-XiaoniNeural",
      "volume": "-20%"
    },
    {
      "desc": "è·¯äººä¹™",
      "text": "è¿™å°å­çœŸæ˜¯ä¸çŸ¥æ­»æ´»ï¼Œç«Ÿç„¶æ•¢æŒ‘æˆ˜å¢ç™½æ’·",
      "voice": "zh-TW-HsiaoChenNeural",
      "volume": "-20%"
    },
    {
      "desc": "æ—ç™½",
      "text": "é¢å¯¹æ£ æºªå‰‘ä»™å¢ç™½æ’·çš„æ€æ„ï¼Œå¾å‡¤å¹´æŒ‰ä½å‰‘æŸ„è“„åŠ¿å¾…å‘ï¼Œä»–å°†å§œæ³¥æ”¾åœ¨å¿ƒå°–ä¸Šï¼Œè¯é”‹ä¸€å¥æ¯”ä¸€å¥çŠ€åˆ©ï¼Œå¨é€¼åˆ©è¯±çš„è¦æ±‚å¢ç™½æ’·æ”¾å§œæ³¥ä¸€æ¡ç”Ÿè·¯ã€‚å¢ç™½æ’·ä¹Ÿæ˜¯ä¸æ’å—å¢™ä¸å›å¤´çš„äººï¼Œä»–ä¸è¥¿æ¥šæœ‰æ·±ä»‡å¤§æ¨ä¸å¾—ä¸æŠ¥...",
      "voice": "zh-CN-YunxiNeural",
      "rate": "0%",
      "pitch": "0Hz",
      "volume": "0%"
    },
    {
      "desc": "æ—ç™½",
      "text": "å¢ç™½æ’·å‡èšå‰‘æ°”ï¼Œå‰‘å…‰å¦‚è™¹ï¼Œç›´æŒ‡å§œæ³¥ã€‚å‰‘æ°”å¿«åˆ°å§œæ³¥çš„æ—¶å€™ï¼Œç«Ÿç„¶è¢«ä¸€é¢—å°çŸ³å­æ‰“ç ´ï¼ä¸‡åƒå‰‘æ°”ç¬é—´æ¶ˆæ•£ã€‚å±…ç„¶å°±æ˜¯åˆšåˆšè¿›å…¥å±±é—¨çš„é’è¡£ç”·å­ã€‚å¢ç™½æ’·å¿ƒä¸­è­¦é“ƒå¤§ä½œï¼Œå†æ¬¡å‡ç»“åƒä¸‡æ°´å‰‘æƒ³è¦å…ˆä¸‹æ‰‹ä¸ºå¼ºï¼Œé’è¡£ç”·å­ç«Ÿç„¶ä¸€åªæ‰‹å°±æŒ¡ä¸‹äº†ï¼Œéšä¹‹é£“é£ç›˜èµ·ï¼Œç«Ÿç„¶æœ‰å±±å‘¼æµ·å•¸ä¹‹åŠ¿ï¼Œä¼—äººåˆ†åˆ†è¢«é€¼é€€ã€‚éšåçš„æ‰“æ–—ï¼Œé’è¡£ç”·å­æ¯ä¸€æ­¥éƒ½ç²¾å‡†é¢„æµ‹äº†å¢ç™½æ’·çš„åŠ¨ä½œï¼Œå¢ç™½æ’·å¿ƒä¸­æƒŠéª‡ä¸å·²ã€‚",
      "voice": "zh-CN-YunxiNeural",
      "rate": "0%",
      "pitch": "0Hz",
      "volume": "0%"
    },
    {
      "desc": "å¢ç™½æ’·",
      "text": "äººå¿ƒå…¥å±€ï¼Œè§‚å­æ— æ•Œï¼Œæ£‹å±€æœªå¤®ï¼Œæ£‹å­éš¾é€ƒã€‚ä½ æ˜¯ï¼ï¼Ÿ æ›¹é•¿å¿ï¼",
      "voice": "zh-CN-YunyangNeural",
      "rate": "-2%",
      "pitch": "2Hz",
      "volume": "10%"
    }
  ]
}' \
-o output.mp3

```

ä½ å°†çœ‹åˆ°output.mp3æ–‡ä»¶çš„ç”Ÿæˆï¼Œå¹¶ç«‹å³å¯ä»¥æ’­æ”¾ã€‚

#### å‚æ•°è¯´æ˜

- text: ä½ éœ€è¦è½¬è¯­éŸ³çš„æ–‡å­—ã€‚
- voice: ä½ éœ€è¦ç”¨åˆ°çš„å£°éŸ³ï¼Œå‚è€ƒï¼š[æ”¯æŒçš„å£°éŸ³åˆ—è¡¨](./packages/backend/src/llm/prompt/voiceList.json)
- rate: è¯­é€Ÿè°ƒæ•´ï¼Œç™¾åˆ†æ¯”å½¢å¼ï¼Œé»˜è®¤ +0%ï¼ˆæ­£å¸¸ï¼‰ï¼Œå¦‚ "+50%"ï¼ˆåŠ å¿« 50%ï¼‰ï¼Œ"-20%"ï¼ˆå‡æ…¢ 20%ï¼‰ã€‚
- volume: éŸ³é‡è°ƒæ•´ï¼Œç™¾åˆ†æ¯”å½¢å¼ï¼Œé»˜è®¤ +0%ï¼ˆæ­£å¸¸ï¼‰ï¼Œå¦‚ "+20%"ï¼ˆå¢ 20%ï¼‰ï¼Œ"-10%"ï¼ˆå‡ 10%ï¼‰ã€‚
- pitch: éŸ³è°ƒè°ƒæ•´ï¼Œé»˜è®¤ +0Hzï¼ˆæ­£å¸¸ï¼‰ï¼Œå¦‚ "+10Hz"ï¼ˆæé«˜ 10 èµ«å…¹ï¼‰ï¼Œ"-5Hz"ï¼ˆé™ä½ 5 èµ«å…¹ï¼‰ã€‚

### æ¥å…¥å…¶ä»– TTS æœåŠ¡

- TODO

## æŠ€æœ¯å®ç° ğŸ› ï¸

- **å‰ç«¯**ï¼šVue 3 + TypeScript + Element Plus ğŸŒ  
- **åç«¯**ï¼šNode.js + Express + TypeScript âš¡  
- **è¯­éŸ³åˆæˆ**ï¼šMicrosoft Azure TTS(æ›´å¤šå¼•æ“æ¥å…¥ä¸­) + OpenAI(OpenAI å…¼å®¹å³å¯) + ffmpeg ğŸ¤  
- **éƒ¨ç½²**ï¼šNode.js + Docker + Docker Compose ğŸ³  

## å¿«é€Ÿå¼€å‘ ğŸš€

1.å…‹éš†ä»“åº“

```bash
git clone https://github.com/cosin2077/easyVoice.git
```

2.å®‰è£…ä¾èµ–

```bash
pnpm i -r
```

3.å¯åŠ¨é¡¹ç›®

```bash
pnpm dev
```

4.æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® `http://localhost:5173/`ï¼Œå¼€å§‹ä½“éªŒå§ï¼

## ç¯å¢ƒå˜é‡ âš™ï¸

| å˜é‡å              | é»˜è®¤å€¼                         | æè¿°                          |
|--------------------|-------------------------------|------------------------------|
| `PORT`             | `3000`                        | æœåŠ¡ç«¯å£                      |
| `OPENAI_BASE_URL`  | `https://api.openai.com/v1`   | OpenAI å…¼å®¹ API åœ°å€          |
| `OPENAI_API_KEY`   | -                             | OpenAI API Key               |
| `MODEL_NAME`       | -                             | ä½¿ç”¨çš„æ¨¡å‹åç§°                 |
| `RATE_LIMIT_WINDOW`| `1`                           | é€Ÿç‡é™åˆ¶çª—å£å¤§å°ï¼ˆåˆ†é’Ÿï¼‰         |
| `RATE_LIMIT`       | `10`                          | é€Ÿç‡é™åˆ¶æ¬¡æ•°                   |
| `EDGE_API_LIMIT`   | `3`                           | Edge-TTS API å¹¶å‘æ•°           |

- **é…ç½®æ–‡ä»¶**ï¼šå¯åœ¨ `.env` æˆ– `packages/backend/.env` ä¸­è®¾ç½®ï¼Œä¼˜å…ˆçº§ä¸º `packages/backend/.env > .env`ã€‚  
- **Docker é…ç½®**ï¼šé€šè¿‡ `-e` å‚æ•°ä¼ å…¥ç¯å¢ƒå˜é‡ï¼Œå¦‚ä¸Šæ–‡ç¤ºä¾‹ã€‚

## FAQ

- **Q: å¦‚ä½•é…ç½® OpenAI ç›¸å…³ä¿¡æ¯?**
- A: åœ¨ `.env` æ–‡ä»¶ä¸­æ·»åŠ  `OPENAI_API_KEY=your_api_key` `OPENAI_BASE_URL=openai_compatible_base_url` `MODEL_NAME=openai_model_name`ï¼Œä½ å¯ä»¥ç”¨ä»»ä½• openai compatible çš„ API åœ°å€å’Œæ¨¡å‹åç§°ï¼Œä¾‹å¦‚ `https://openrouter.ai/api/v1/` å’Œ `deepseek`ã€‚

- **Q: ä¸ºä»€ä¹ˆæˆ‘çš„AIé…éŸ³æ•ˆæœä¸å¥½ï¼Ÿ**
- A: AI æ¨èé…éŸ³æ˜¯é€šè¿‡å¤§æ¨¡å‹æ¥å†³å®šä¸åŒçš„æ®µè½çš„é…éŸ³å‚æ•°ï¼Œå¤§æ¨¡å‹çš„èƒ½åŠ›ç›´æ¥å½±å“é…éŸ³ç»“æœï¼Œä½ å¯ä»¥å°è¯•æ›´æ¢ä¸åŒçš„å¤§æ¨¡å‹ï¼Œæˆ–è€…æ˜¯ç”¨ Edge-TTS é€‰æ‹©å›ºå®šçš„å£°éŸ³é…éŸ³ã€‚

- **Q: é€Ÿåº¦å¤ªæ…¢ï¼Ÿ**
- A: AI æ¨èé…éŸ³éœ€è¦æŠŠè¾“å…¥çš„æ–‡æœ¬åˆ†æ®µã€ç„¶åè®© AI åˆ†æã€æ¨èæ¯ä¸€åˆ†æ®µçš„é…éŸ³å‚æ•°ï¼Œæœ€åå†ç”ŸæˆéŸ³é¢‘ã€æ‹¼æ¥ã€‚é€Ÿåº¦ä¼šæ¯”ç›´æ¥ç”¨ Edge-TTSæ…¢ã€‚ä½ å¯ä»¥æ›´æ¢ç›¸åº”æ›´å¿«çš„å¤§æ¨¡å‹ï¼Œæˆ–è€…å°è¯•è°ƒèŠ‚ Edge-TTS çš„å¹¶å‘å‚æ•°ï¼šEDGE_API_LIMITä¸ºæ›´å¤§çš„å€¼(10 ä»¥ä¸‹)ï¼Œæ³¨æ„å¹¶å‘å¤ªé«˜å¯èƒ½ä¼šæœ‰é™åˆ¶ã€‚

## Tips

- å½“å‰ä¸»è¦é€šè¿‡ Edge-TTS API æä¾›å…è´¹è¯­éŸ³åˆæˆã€‚  

- æœªæ¥è®¡åˆ’æ”¯æŒå®˜æ–¹ APIã€Google TTSã€å£°éŸ³å…‹éš†ç­‰åŠŸèƒ½ã€‚


# å¼€å‘è¯´æ˜ 2025-11-13
## EasyVoiceè¿™ä¸ªå·¥ç¨‹è¿è¡Œçš„å‘½ä»¤æ˜¯pnpm build pnpm startè¿™ä¸¤ä¸ªå‘½ä»¤ï¼Œè¿™æ˜¯æŒ‰ç…§ç”Ÿäº§ç‰ˆæœ¬éœ€è¦è¿è¡Œçš„å‘½ä»¤å¯¼è‡´åç»­ã€fracåº“å¯¼å…¥é—®é¢˜æ˜¯é€šè¿‡å‡çº§é¡¹ç›®ã€‘
## è¿™æ ·çš„é—®é¢˜ä»¥åŠè§£å†³æ–¹å¼ã€‚
## æ­¤å·¥ç¨‹åœ¨æœ¬åœ°å¼€å‘è¿è¡Œå‘½ä»¤ï¼špnpm dev
## éœ€è¦å‘å¸ƒåˆ°æœåŠ¡å™¨ï¼ˆlinuxï¼‰æ—¶æ‰éœ€è¦è¿è¡Œpnpm build å’Œpnpm startå‘½ä»¤ï¼ˆè¿™ä¸€æ­¥è¿˜æœ‰å¾…éªŒè¯ï¼‰ã€‚
## ç›®å‰å­˜åœ¨çš„é—®é¢˜ï¼š1ï¼Œç›¸åŒçš„è¯·æ±‚ç¼“å­˜åˆ¤å®šæœ‰é—®é¢˜ï¼›2ï¼Œunityä¸­è¾¹ä¸‹è½½è¾¹æ’­æ”¾çš„æ—¶å€™ä¸€å¡ä¸€å¡çš„ã€‚
## 2025-11-27;node.jsçš„ç‰ˆæœ¬éœ€è¦v20+,ç›®å‰å®‰è£…äº†v20.19.6ç›´æ¥å°±è§£å†³äº†é—®é¢˜ï¼š
root@iZ2zej9pzs8ovyjtkk5fvdZ:~/AIStudy/EasyVoice2# pnpm start

> easy-voice@0.0.15 start /root/AIStudy/EasyVoice2
> cross-env MODE=production pnpm --filter @easy-voice/backend start


> @easy-voice/backend@0.0.15 start /root/AIStudy/EasyVoice2/packages/backend
> node dist/server.js

info: init AudioCacheService with {"storageOptions":{"cacheDir":"/root/AIStudy/EasyVoice2/packages/backend/audio/.cache"},"storageType":"file","timestamp":"2025-11-26T09:48:27.479Z","ttl":31536000000}
Server running on port 3000
info: validateEdge {"format":"mp3","pitch":"+0Hz","rate":"+0%","text":"å¤§æˆ˜æ‰¶é£éƒ¡å°†äº5åˆ†é’Ÿåå¼€å§‹ï¼Œè¯·å„ä½ä¾ å£«å‰å¾€æ´›é˜³æ­¥å‡¡å¤„æŠ¥åå‚ä¸ã€‚","timestamp":"2025-11-26T09:49:41.303Z","useLLM":false,"voice":"zh-CN-XiaoxiaoNeural","volume":"+0%"}
info: Generated stream task ID: taska89d150640d7482b03ee9173a4b91c88 {"timestamp":"2025-11-26T09:49:41.306Z"}
node:internal/process/promises:288
            triggerUncaughtException(err, true /* fromPromise */);
            ^

Error [ERR_REQUIRE_ESM]: require() of ES Module /root/AIStudy/EasyVoice2/node_modules/.pnpm/franc@6.2.0/node_modules/franc/index.js from /root/AIStudy/EasyVoice2/packages/backend/dist/utils/index.js not supported.
Instead change the require of /root/AIStudy/EasyVoice2/node_modules/.pnpm/franc@6.2.0/node_modules/franc/index.js in /root/AIStudy/EasyVoice2/packages/backend/dist/utils/index.js to a dynamic import() which is available in all CommonJS modules.
    at /root/AIStudy/EasyVoice2/packages/backend/dist/utils/index.js:58:71
    at async getLangConfig (/root/AIStudy/EasyVoice2/packages/backend/dist/utils/index.js:58:23)
    at async generateTTSStream (/root/AIStudy/EasyVoice2/packages/backend/dist/services/tts.stream.service.js:78:33) {
  code: 'ERR_REQUIRE_ESM'
}

Node.js v18.20.8
/root/AIStudy/EasyVoice2/packages/backend:
â€‰ERR_PNPM_RECURSIVE_RUN_FIRST_FAILâ€‰ @easy-voice/backend@0.0.15 start: `node dist/server.js`
Exit status 1
â€‰ELIFECYCLEâ€‰ Command failed with exit code 1.
